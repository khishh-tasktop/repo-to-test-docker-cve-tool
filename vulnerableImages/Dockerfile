FROM python:3.9.6-slim-buster

USER root

RUN DEBIAN_FRONTEND=noninteractive

RUN apt-get update && \
    apt-get install --no-install-recommends -y npm git bash python3-pip

RUN npm install -g yarn

# generating pip.conf file to define where python modules should be retrieved from.
RUN mkdir /root/.pip && \
    touch /root/.pip/pip.conf && \
    printf "[global]\nindex-url = https://pypi.python.org/simple/\nextra-index-url = https://artifactory.van.tasktop.com/artifactory/api/pypi/tasktop-python-packages/simple" > /root/.pip/pip.conf

# install tasktop_viz_licenses_tool from Artifactory
RUN pip3 install tasktop_viz_licenses_tool

ENTRYPOINT ["tail", "-f", "/dev/null"]
